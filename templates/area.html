{% extends "layout.html" %}

{% block content %}
  <!-- el array de aqui guarda unas variables que llegan desde el archivo python  -->
  {% set acciones = borrado,boolean,edita %}

  <hr>
  {% set ns = namespace(prev=0) %}

  {% if titulo=='Curso' %}
    {%- set ns.prev = ns.prev+1 %}
  {% endif %}

  {% for x in acciones %}
    <!-- x={{x}} <br> -->
    {%- if x!=None and x!=False %} 
      {%- set ns.prev = ns.prev+1 %}
    {% endif -%} 
  {% endfor %}

  <!-- acciones={{ns.prev}} -->
    <div id="booleanos" style="display:None">{{boolean}}</div>
    <table width="100%" border="1" cellpadding="0" bordercolor="#000000">
    <tbody>
    <tr>
    <td color="FFFFFF" bgcolor="#465F5A" valign="top">
    <right><h3><a href="/catalogosAgregar:{{titulo}}:%">Agregar {{titulo}}</a></h3></right>
    <center><h3>{{tabla_plural}} 
      {% if male==True %}
        REGISTRADOS
      {% else %}
        REGISTRADAS
      {% endif %}
    </h3></center>
    <table width="100%" border="1" cellpadding="0" bordercolor="#000000">
    <thead>
      <tr>
        {% if id_tabla==True %}
          <td class="text-center" style="color:white" bgcolor="blue">ID</td>
        {% endif %}

        {% for columna in columnas %}
          <td class="text-center" style="color:white" bgcolor="blue">{{columna}}</td>
        {% endfor %}

        <!-- con 'ctrl' + 'Esc ' puedes eliminar espacion entre renglones. Ejemplo :
          Antes: 
            borrado,(aqui se usa el comando)
            boolean,(aqui se usa el comando)
            edita
          Despues
            borrado,boolean,edita -->
        <td class="text-center" bgcolor="black" colspan="{{ns.prev}}" style="color:white">Opciones</td>
      </tr>
    </thead>
    <tbody>
    {% for i in comentarios %}
        <tr>
        {% if id_tabla==True %}
          <td>{{i.0}}</td> 
        {% endif %}

        {% for campo in range(1,num_columnas+1) %}
          
          <td
            {% if boolean != None %}
class="text-center{% for booleano in boolean %}{% if campo==booleano+1 %} booleanTarget{% endif %}{% endfor %}{% endif %}"
          >
            {{ i[campo] }}
          </td>

        {% endfor %}
        
        {% if edita !=False %}
          <td bgcolor="#2B2D83" width="8%">
          {% if titulo=="Curso" %}
            <center><a href="/catalogosAgregar:{{titulo}}:{{i.0}}" >Editar</a></center>
          {% else %}
            <center><a href="/catalogosEdita:{{titulo}}:{{i.0}}" >Editar</a></center>
          {% endif %}
        </td>
        {% endif %}

        {% if titulo=="Curso" %}
        <td bgcolor="#2B2D83">
          <center><a href="/Instanciar_curso:{{i.0}}" >Activar Curso</a></center>
        </td>
        {% endif %}

        {% if titulo=="Curso" %}
        <td bgcolor="#2B2D83" width="8%">
            <center><a href="/Apariciones_curso:{{i.0}}" >Ver Apariciones</a></center>
          </td>
        {% endif %}

        {% if borrado!=False %}
          <td bgcolor="#3C3EC5" width="8%">
          <center><a href="/catalogoBorrar:{{titulo}}:{{i.0}}" >Borrar</a></center>
        {% endif %}
        </td>
        </tr>
    {% endfor %}
    </tbody>
    </table>
    </td>
    </tr>
    </tbody>
    </table>

    <script>
      function IntToBoolean(int){
        console.log(int)
        if(int==1){
          return "SI"
          return "Cierto"
        }else{
          return "NO"
          return "Falso"
        }
      }

      booleanos=document.getElementsByClassName("booleanTarget")
      console.log(booleanos);
      for(let bool=0;bool<booleanos.length;bool++){
        let txt=booleanos[bool].innerText
        console.log(txt);
        booleanos[bool].innerText=IntToBoolean(txt)
      }
    </script>

{% endblock %}